<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>AI æç¤ºè¯ç®¡ç† - ç®¡ç†åå°</title>
    <link rel="stylesheet" href="/css/style.css">
    <style>
        .prompts-section {
            margin-bottom: 2rem;
            padding: 1rem;
            background: #f9f9f9;
            border-radius: 4px;
        }
        
        .prompts-section h2 {
            margin-top: 0;
            color: #2c3e50;
            border-bottom: 2px solid #3498db;
            padding-bottom: 0.5rem;
        }
        
        .prompt-item {
            background: white;
            padding: 1rem;
            margin-bottom: 1rem;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        .prompt-item h3 {
            margin-top: 0;
            color: #34495e;
            display: -webkit-box;
            display: -webkit-flex;
            display: -ms-flexbox;
            display: flex;
            -webkit-box-pack: justify;
            -webkit-justify-content: space-between;
            -ms-flex-pack: justify;
            justify-content: space-between;
            -webkit-box-align: center;
            -webkit-align-items: center;
            -ms-flex-align: center;
            align-items: center;
        }
        
        .prompt-template {
            background: #f5f5f5;
            padding: 0.75rem;
            border-left: 3px solid #3498db;
            font-family: 'Courier New', monospace;
            font-size: 0.85rem;
            white-space: pre-wrap;
            word-wrap: break-word;
            max-height: 200px;
            overflow-y: auto;
        }
        
        .prompt-actions {
            margin-top: 0.75rem;
            display: -webkit-box;
            display: -webkit-flex;
            display: -ms-flexbox;
            display: flex;
            -webkit-flex-wrap: wrap;
            -ms-flex-wrap: wrap;
            flex-wrap: wrap;
            gap: 0.5rem;
        }
        
        .prompt-actions button,
        .prompt-actions a {
            padding: 0.4rem 0.8rem;
            font-size: 0.9rem;
            border-radius: 4px;
            text-decoration: none;
            border: none;
            cursor: pointer;
            -webkit-transition: all 0.2s ease;
            transition: all 0.2s ease;
        }
        
        .btn-edit {
            background: #3498db;
            color: white;
        }
        
        .btn-edit:hover {
            background: #2980b9;
        }
        
        .btn-toggle {
            background: #95a5a6;
            color: white;
        }
        
        .btn-toggle:hover {
            background: #7f8c8d;
        }
        
        .badge {
            display: inline-block;
            padding: 0.25rem 0.5rem;
            font-size: 0.75rem;
            border-radius: 3px;
            margin-left: 0.5rem;
        }
        
        .badge-active {
            background: #27ae60;
            color: white;
        }
        
        .badge-inactive {
            background: #e74c3c;
            color: white;
        }
        
        .badge-system {
            background: #9b59b6;
            color: white;
        }
        
        .badge-function {
            background: #f39c12;
            color: white;
        }
        
        @media screen and (max-width: 480px) {
            .prompt-actions {
                -webkit-box-orient: vertical;
                -webkit-box-direction: normal;
                -webkit-flex-direction: column;
                -ms-flex-direction: column;
                flex-direction: column;
            }
            
            .prompt-actions button,
            .prompt-actions a {
                width: 100%;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¤– AI æç¤ºè¯ç®¡ç†</h1>
        
        <% if (message) { %>
            <div class="message <%= message.indexOf('é”™è¯¯') >= 0 || message.indexOf('Error') >= 0 ? 'error' : 'success' %>">
                <%= message %>
            </div>
        <% } %>
        
        <!-- åŠŸèƒ½å¯¼èˆª -->
        <div class="admin-nav-grid">
            <a href="/admin/prompts" class="admin-nav-btn active">
                <span class="admin-nav-icon">ğŸ¤–</span>
                <span class="admin-nav-label">æç¤ºè¯ç®¡ç†</span>
            </a>
            <a href="/admin" class="admin-nav-btn">
                <span class="admin-nav-icon">ğŸ“¤</span>
                <span class="admin-nav-label">åœ£ç»å¯¼å…¥</span>
            </a>
        </div>
        
        <!-- System Prompts -->
        <div class="prompts-section">
            <h2>ğŸŒ ç³»ç»Ÿé¢„è®¾æç¤ºè¯ï¼ˆå…¨å±€ç”Ÿæ•ˆï¼‰</h2>
            <p style="color: #7f8c8d; font-size: 0.9rem;">
                ç³»ç»Ÿæç¤ºè¯å®šä¹‰ AI çš„èº«ä»½å’ŒåŸºæœ¬åŸåˆ™ï¼Œå¯¹æ‰€æœ‰å¯¹è¯ç”Ÿæ•ˆã€‚
            </p>
            
            <% if (systemPrompts.length === 0) { %>
                <p style="color: #e74c3c;">æš‚æ— ç³»ç»Ÿæç¤ºè¯</p>
            <% } else { %>
                <% systemPrompts.forEach(function(prompt) { %>
                    <div class="prompt-item">
                        <h3>
                            <span>
                                <%= prompt.prompt_name %>
                                <span class="badge badge-system">ç³»ç»Ÿ</span>
                                <span class="badge <%= prompt.is_active ? 'badge-active' : 'badge-inactive' %>">
                                    <%= prompt.is_active ? 'âœ… å¯ç”¨' : 'âŒ åœç”¨' %>
                                </span>
                            </span>
                        </h3>
                        
                        <div class="prompt-template"><%= prompt.prompt_template %></div>
                        
                        <div class="prompt-actions">
                            <a href="/admin/prompts/edit/<%= prompt.id %>" class="btn-edit">âœï¸ ç¼–è¾‘</a>
                            <form method="post" action="/admin/prompts/toggle/<%= prompt.id %>" style="display: inline;">
                                <button type="submit" class="btn-toggle">
                                    <%= prompt.is_active ? 'ğŸ”´ åœç”¨' : 'âœ… å¯ç”¨' %>
                                </button>
                            </form>
                        </div>
                    </div>
                <% }); %>
            <% } %>
        </div>
        
        <!-- Function Prompts -->
        <div class="prompts-section">
            <h2>âš™ï¸ åŠŸèƒ½æç¤ºè¯ï¼ˆå…·ä½“ä»»åŠ¡ï¼‰</h2>
            <p style="color: #7f8c8d; font-size: 0.9rem;">
                åŠŸèƒ½æç¤ºè¯ç”¨äºç‰¹å®šä»»åŠ¡ï¼ˆç»æ–‡æ€»ç»“ã€å†å²èƒŒæ™¯ç­‰ï¼‰ï¼Œä¼šé™„åŠ åœ¨ç³»ç»Ÿæç¤ºè¯ä¹‹åã€‚
            </p>
            
            <% if (functionPrompts.length === 0) { %>
                <p style="color: #e74c3c;">æš‚æ— åŠŸèƒ½æç¤ºè¯</p>
            <% } else { %>
                <% functionPrompts.forEach(function(prompt) { %>
                    <div class="prompt-item">
                        <h3>
                            <span>
                                <%= prompt.prompt_name %>
                                <span class="badge badge-function"><%= prompt.function_type %></span>
                                <span class="badge <%= prompt.is_active ? 'badge-active' : 'badge-inactive' %>">
                                    <%= prompt.is_active ? 'âœ… å¯ç”¨' : 'âŒ åœç”¨' %>
                                </span>
                            </span>
                        </h3>
                        
                        <div class="prompt-template"><%= prompt.prompt_template %></div>
                        
                        <div class="prompt-actions">
                            <a href="/admin/prompts/edit/<%= prompt.id %>" class="btn-edit">âœï¸ ç¼–è¾‘</a>
                            <form method="post" action="/admin/prompts/toggle/<%= prompt.id %>" style="display: inline;">
                                <button type="submit" class="btn-toggle">
                                    <%= prompt.is_active ? 'ğŸ”´ åœç”¨' : 'âœ… å¯ç”¨' %>
                                </button>
                            </form>
                        </div>
                    </div>
                <% }); %>
            <% } %>
        </div>
        
        <div class="nav-links">
            <a href="/admin">è¿”å›ç®¡ç†é¦–é¡µ</a>
            <a href="/">è¿”å›ç½‘ç«™é¦–é¡µ</a>
        </div>
    </div>
    <script src="/js/main.js"></script>
</body>
</html>
